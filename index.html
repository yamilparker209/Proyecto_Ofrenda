<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <title>ofrenda de dia de muetos</title>
</head>
<body>
    
<canvas id="myCanvas">
    <!--El elemento HTML canvas se puede utilizar para dibujar grÃ¡ficos a travÃ©s de 
        secuencias de comandos (por lo general JavaScript ).-->
</canvas>

<!-- AquÃ­ va todo el cÃ³digo de three.js -->
<!-- script type="importmap" importa las librerÃ­as necesarias para three.js-->
<script type="importmap"> 
    {
        "imports":{
            "three": "./js/three.module.js",
            "three/OrbitControls": "./js/OrbitControls.js", 
            "three/PointerLockControls": "./js/PointerLockControls.js"   
        }
}
</script>
<script type="module"> 
//ðŸ—ƒï¸ðŸ—ƒï¸ Mandar llamar a la librerÃ­a
    import * as THREE from 'three'; 
 import {OrbitControls} from 'three/OrbitControls';
    import {PointerLockControls} from 'three/PointerLockControls';

///importar

import ofre from "./js/ofre.js";
import cuadrof from "./js/cuadrof.js";
import flor from "./js/flor.js";
import calavera from "./js/calavera.js";
import vela from "./js/vela.js";
import pan from "./js/pan.js";
import papelaz from "./js/papelaz.js";
import papelro from "./js/papelro.js";
import papelver from "./js/papelver.js";

    console.log(OrbitControls);
    console.log(PointerLockControls);
//ðŸ•¹ï¸ðŸ•¹ï¸ Renderer - Realiza una conexiÃ³n entre el cÃ³digo y el canvas
    var renderer = new THREE.WebGLRenderer({
    canvas: document.getElementById('myCanvas'), antialias: true,
    });
renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x70707C);


// ðŸŽ¬ Creando nueva escena - Es el espacio donde se colocan los objetos
    var scene = new THREE.Scene();

//ðŸŽ¥ðŸŽ¥ Agregar una cÃ¡mara de perspectiva
    var camera = new THREE.PerspectiveCamera(70,window.innerWidth / window.innerHeight,0.1,2000
      );
    scene.add(camera);

    //Settings de la cÃ¡mara
    camera.position.set(0, 4, 80);

    // AÃ±adiendo los OrbitControls
    var controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
//fondo
 var loader = new THREE.TextureLoader();
 var bgTexture = loader.load("./Fotos/noc.jpg");
 scene.background = bgTexture;

// Espacio para colocar los objetos
//Luces
    const luz = new THREE.AmbientLight(0xFFFFFF, 1);
    luz.position.set(0, 0, 30);
    scene.add(luz);


////ecenario

    //Plano
    var plano = new THREE.BoxGeometry(300,0.5,700);
    var textura1=new THREE.TextureLoader().load("./Fotos/sempa.jpg");
    var material1=new THREE.MeshLambertMaterial({map:textura1});
    var mesh1 = new THREE.Mesh(plano,material1);
    mesh1.position.set(45,-10,120);
    scene.add(mesh1);
    mesh1.receiveShadow = true;

    textura1.wrapS=THREE.RepeatWrapping;
  textura1.wrapT=THREE.RepeatWrapping;
  textura1.repeat.set(8,8)
/////ecenario1

//cubo 1
    var geometry = new THREE.BoxGeometry(70,10,90);
    var texture=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material=new THREE.MeshLambertMaterial({map:texture});
    var mesh = new THREE.Mesh(geometry,material);
    mesh.position.set(0,-5,0);
    scene.add(mesh);

    texture.wrapS=THREE.RepeatWrapping;
    texture.wrapT=THREE.RepeatWrapping;
    texture.repeat.set(0.5,0.5);

    texture.offset.x=0;
    texture.offset.y=0.5;


///Cubo2
    var geometry2 = new THREE.BoxGeometry(60,10,80);
    var texture2=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material2=new THREE.MeshLambertMaterial({map:texture2});
    var mesh2 = new THREE.Mesh(geometry2,material2);
    mesh2.position.set(0,4,0);
    scene.add(mesh2);

    texture2.wrapS=THREE.RepeatWrapping;
    texture2.wrapT=THREE.RepeatWrapping;
    texture2.repeat.set(0.5,0.5);

    texture2.offset.x=0;
    texture2.offset.y=0;
//cubo3 
    var geometry3 = new THREE.BoxGeometry(50,10,70);
    var texture3=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material3=new THREE.MeshLambertMaterial({map:texture3});
    var mesh3 = new THREE.Mesh(geometry3,material3);
    mesh3.position.set(0,14,0);
    scene.add(mesh3);

    texture3.wrapS=THREE.RepeatWrapping;
    texture3.wrapT=THREE.RepeatWrapping;
    texture3.repeat.set(0.5,0.5);

    texture3.offset.x=0.5;
    texture3.offset.y=0.5;

///Cubo4
    var geometry4 = new THREE.BoxGeometry(40,10,60);
    var texture4=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material4=new THREE.MeshLambertMaterial({map:texture4});
    var mesh4 = new THREE.Mesh(geometry4,material4);
    mesh4.position.set(0,20,0);
    scene.add(mesh4);

    texture4.wrapS=THREE.RepeatWrapping;
    texture4.wrapT=THREE.RepeatWrapping;
    texture4.repeat.set(0.5,0.5);

    texture4.offset.x=0.5;
    texture4.offset.y=0;


    ///Cubo5
    var geometry5 = new THREE.BoxGeometry(30,10,50);
    var texture5=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material5=new THREE.MeshLambertMaterial({map:texture5});
    var mesh5 = new THREE.Mesh(geometry5,material5);
    mesh5.position.set(0,30,0);
    scene.add(mesh5);

    texture5.wrapS=THREE.RepeatWrapping;
    texture5.wrapT=THREE.RepeatWrapping;
    texture5.repeat.set(0.5,0.5);

    texture5.offset.x=0.5;
    texture5.offset.y=0; 
      
    /////// casa


 ///pilar1


    var geometry6 = new THREE.BoxGeometry(5,20,20);
    var texture6=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material6=new THREE.MeshLambertMaterial({map:texture6});
    var mesh6 = new THREE.Mesh(geometry6,material6);
    mesh6.position.set(10,40,0);
    scene.add(mesh6);

    texture6.wrapS=THREE.RepeatWrapping;
    texture6.wrapT=THREE.RepeatWrapping;
    texture6.repeat.set(0.5,0.5);

    texture6.offset.x=0.5;
    texture6.offset.y=0; 

    
 ///pilar2


    var geometry7 = new THREE.BoxGeometry(5,20,20);
    var texture7=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material7=new THREE.MeshLambertMaterial({map:texture7});
    var mesh7 = new THREE.Mesh(geometry7,material7);
    mesh7.position.set(-10,40,0);
    scene.add(mesh7);

    texture7.wrap7=THREE.RepeatWrapping;
    texture7.wrapT=THREE.RepeatWrapping;
    texture7.repeat.set(0.5,0.5);

    texture7.offset.x=0.5;
    texture7.offset.y=0; 

    ///pilar3


    var geometry8 = new THREE.BoxGeometry(25,20,5);
    var texture8=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material8=new THREE.MeshLambertMaterial({map:texture8});
    var mesh8 = new THREE.Mesh(geometry8,material8);
    mesh8.position.set(0,40,-12.5);
    scene.add(mesh8);

    texture8.wrap8=THREE.RepeatWrapping;
    texture8.wrapT=THREE.RepeatWrapping;
    texture8.repeat.set(0.5,0.5);

    texture8.offset.x=0.5;
    texture8.offset.y=0; 


      ///techo


    var geometry9 = new THREE.BoxGeometry(25,5,28);
    var texture9=new THREE.TextureLoader().load("./Fotos/pira.jpg");
    var material9=new THREE.MeshLambertMaterial({map:texture9});
    var mesh9 = new THREE.Mesh(geometry9,material9);
    mesh9.position.set(0,52.6,-2);
    scene.add(mesh9);

    texture9.wrap9=THREE.RepeatWrapping;
    texture9.wrapT=THREE.RepeatWrapping;
    texture9.repeat.set(0.5,0.5);

    texture9.offset.x=0.5;
    texture9.offset.y=0; 



///// ya agurpado

    var pir = new THREE.Group();
    pir.add(mesh9,mesh8,mesh7,mesh6,mesh5,mesh4,mesh3,mesh2,mesh);

    pir.position.set(45,0,-80);
    scene.add(pir);
pir.scale.set(2, 2, 2);


/////priramides
    const ofre1 = ofre({x:0,y:0,z:0});
    scene.add(ofre1);
      ofre1.position.set(-50,-10,80);
ofre1.scale.set(1, 3, 1);

 const ofre2 = ofre({x:0,y:0,z:0});
    scene.add(ofre2);
      ofre2.position.set(150,-10,80);
ofre2.scale.set(1, 3, 1);

 const ofre3 = ofre({x:0,y:0,z:0});
    scene.add(ofre3);
      ofre3.position.set(-50,-10,230);
ofre3.scale.set(1, 3, 2);

 const ofre4 = ofre({x:0,y:0,z:0});
    scene.add(ofre4);
      ofre4.position.set(150,-10,230);
ofre4.scale.set(1, 3, 2);

 const ofre6 = ofre({x:0,y:0,z:0});
    scene.add(ofre6);
      ofre6.position.set(-50,-10,350);
ofre6.scale.set(1, 4, 1);

const ofre7 = ofre({x:0,y:0,z:0});
    scene.add(ofre7);
      ofre7.position.set(150,-10,350);
ofre7.scale.set(1, 4, 1);

/////velas principal



 const vela2 = vela({x:0,y:0,z:0});
    scene.add(vela2);
  vela2.position.set(90,-15,0);
vela2.scale.set(3,3, 3);

const vela1 = vela({x:0,y:0,z:0});
    scene.add(vela1);
  vela1.position.set(0,-15,0);
vela1.scale.set(3, 3, 3);

const vela3 = vela({x:0,y:0,z:0});
    scene.add(vela3);
  vela3.position.set(0,-15,80);
vela3.scale.set(3, 3, 3);

const vela4 = vela({x:0,y:0,z:0});
    scene.add(vela4);
  vela4.position.set(90,-15,80);
vela4.scale.set(3,3, 3);

const vela5 = vela({x:0,y:0,z:0});
    scene.add(vela5);
  vela5.position.set(0,-15,170);
vela5.scale.set(3, 3, 3);

const vela6 = vela({x:0,y:0,z:0});
    scene.add(vela6);
  vela6.position.set(90,-15,170);
vela6.scale.set(3,3, 3);

const vela7 = vela({x:0,y:0,z:0});
    scene.add(vela7);
  vela7.position.set(0,-15,250);
vela7.scale.set(3, 3, 3);

const vela8 = vela({x:0,y:0,z:0});
    scene.add(vela8);
  vela8.position.set(90,-15,250);
vela8.scale.set(3,3, 3);

const vela9 = vela({x:0,y:0,z:0});
    scene.add(vela9);
  vela9.position.set(90,-15,340);
vela9.scale.set(3,3, 3);


const vela10 = vela({x:0,y:0,z:0});
    scene.add(vela10);
  vela10.position.set(0,-15,340);
vela10.scale.set(3, 3, 3);




///// calavera

 const calavera1 = calavera({x:0,y:0,z:0});
    scene.add(calavera1);

calavera1.rotation.set(0,33, 0);
calavera1.position.set(23,110,-80);
calavera1.scale.set(2, 2, 2);


///// pape verde

 const papelver1 = papelver({x:0,y:0,z:0});
    scene.add(papelver1);

papelver1.position.set(43,0,4);
papelver1.scale.set(0.5, 0.4, 0.1);

///// pape azul

 const papelaz1 = papelaz({x:0,y:0,z:0});
    scene.add(papelaz1);

papelaz1.position.set(43,20,-7);
papelaz1.scale.set(0.4, 0.3, 0.1);


///// pape rojo

 const papelro1 = papelro({x:0,y:0,z:0});
    scene.add(papelro1);

papelro1.position.set(43,40,-17);
papelro1.scale.set(0.3, 0.3, 0.1);


///cuadroi

 const cuadrof1 = cuadrof({x:0,y:0,z:0});
    scene.add(cuadrof1);

cuadrof1.position.set(43,70,-40);
cuadrof1.scale.set(3, 3, 1);


// pan de muerto 

const pan1 = pan({x:0,y:0,z:0});
    scene.add(pan1);
  pan1.position.set(30,-12,30);
pan1.scale.set(1, 1, 1);


// flores

const flor1 = flor({x:0,y:0,z:0});
    scene.add(flor1);
  flor1.position.set(60,-12,30);
flor1.scale.set(2, 2, 1);






























// PointerLockControls para primera persona
const fpControls = new PointerLockControls(camera, document.body);

// Evento para activar el bloqueo del mouse con clic
document.addEventListener('click', () => {
    fpControls.lock();
});

// Variables para controlar teclas
const keys = {};
document.addEventListener('keydown', (e) => keys[e.code] = true);
document.addEventListener('keyup', (e) => keys[e.code] = false);

const moveSpeed = 0.5;

// ðŸŽ°ðŸŽ°Rendering y animaciÃ³n
requestAnimationFrame(render);
function render() {

    // Si el puntero estÃ¡ bloqueado â†’ controlar movimiento FPS con teclado
    if (fpControls.isLocked) {
        let direction = new THREE.Vector3();

        if (keys['KeyS']) direction.z -= moveSpeed;
        if (keys['KeyW']) direction.z += moveSpeed;
        if (keys['KeyA']) direction.x -= moveSpeed;
        if (keys['KeyD']) direction.x += moveSpeed;

        fpControls.moveRight(direction.x);
        fpControls.moveForward(direction.z);
    } else {
        // Si no estÃ¡ bloqueado, actualizar OrbitControls para navegaciÃ³n con mouse y suavidad
        controls.update();
    }

    // Renderizar la escena y llamar otra vez render
    renderer.render(scene, camera);
    requestAnimationFrame(render);
}

// Ajustar tamaÃ±o al cambiar ventana
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});

</script>
</body>

</html>






